<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kriptic Edition 3.0 | Premium Entertainment Hub</title>
    <meta name="description" content="Professional astronomy-themed entertainment platform with movies, games, and community features.">
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Google Analytics & Adsense -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z2W798YNJP"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7452690493067355" crossorigin="anonymous"></script>
    
    <style>
        /* FONTS LINKED VIA JSDELIVR */
        @font-face { font-family: 'DripOctober'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/DripOctober-vm0JA%5B1%5D.ttf') format('truetype'); }
        @font-face { font-family: 'Chainsaw Carnage'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/ChainsawCarnage%5B1%5D.ttf') format('truetype'); }
        @font-face { font-family: 'Halloween'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/SuperCursed.ttf') format('truetype'); }
        @font-face { font-family: 'CrotahItalic'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/CrotahFreeVersionItalic-z8Ev3.ttf') format('truetype'); }
        @font-face { font-family: 'Dangernight'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/Dangernight-vnZ5y.otf') format('opentype'); }
        @font-face { font-family: 'HeavyJack'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/HeavyJack-DYz7R.ttf') format('truetype'); }
        @font-face { font-family: 'Marlita'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/MarlitaDemo-2vXRK.otf') format('opentype'); }
        @font-face { font-family: 'MockBear'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/MockBear-3lgA8.ttf') format('truetype'); }
        @font-face { font-family: 'Mulinarstamp'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/MulinarstampRegularDemo-q2V9d.otf') format('opentype'); }
        @font-face { font-family: 'UnderThreat'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/UnderThreatDemo-vnVD4.ttf') format('truetype'); }
        @font-face { font-family: 'BlackDahlia'; src: url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/BlackDahlia-LBRG.woff2') format('woff2'), url('https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/BlackDahlia-LBRG_1_.woff') format('woff'); }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'DripOctober', 'Segoe UI', sans-serif;
            background: radial-gradient(ellipse at top, #0a0e27, #000000), radial-gradient(ellipse at bottom, #1a1a3e, #000000);
            color: #e0e7ff; overflow-x: hidden; min-height: 100vh;
        }

        /* Starfield & Backgrounds */
        .starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .star { position: absolute; background: white; border-radius: 50%; box-shadow: 0 0 4px rgba(255, 255, 255, 0.8); animation: twinkle linear infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }
        
        #cursorGravity {
            position: fixed; width: 300px; height: 300px; border-radius: 50%;
            background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
            pointer-events: none; z-index: 5; mix-blend-mode: screen; filter: blur(40px);
            transition: transform 0.1s ease-out; opacity: 0.15;
        }

        /* Theme Variables */
        :root { --primary: #6495ff; --secondary: #9d7dff; --accent: #00d9ff; }
        body.theme-nebula { --primary: #6495ff; --secondary: #9d7dff; --accent: #00d9ff; }
        body.theme-aurora { --primary: #00ff88; --secondary: #00ffff; --accent: #88ff00; }
        body.theme-supernova { --primary: #ff6b35; --secondary: #ff0055; --accent: #ffaa00; }
        body.theme-galaxy { --primary: #667eea; --secondary: #764ba2; --accent: #f093fb; }
        body.theme-creme { --primary: #d4a574; --secondary: #c9a581; --accent: #f9f5f0; }
        body.theme-void { --primary: #1a1a1a; --secondary: #4a4a4a; --accent: #ffffff; }
        body.theme-plasma { --primary: #ff00ff; --secondary: #00ffff; --accent: #ffff00; }
        body.theme-solar { --primary: #ffaa00; --secondary: #ff6600; --accent: #ffdd00; }
        body.theme-lunar { --primary: #c0c0c0; --secondary: #e0e0e0; --accent: #ffffff; }
        body.theme-cosmic { --primary: #ff1493; --secondary: #00bfff; --accent: #7fff00; }

        /* Controls Panel */
        .controls-panel { position: fixed; top: 2rem; right: 2rem; z-index: 1000; background: rgba(0, 0, 0, 0.8); padding: 1.5rem; border-radius: 16px; border: 2px solid var(--primary); backdrop-filter: blur(30px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5); min-width: 250px; transition: all 0.3s ease; }
        .controls-panel.collapsed { padding: 0; min-width: 0; width: 0; height: 0; opacity: 0; pointer-events: none; transform: scale(0); }
        .controls-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .controls-close { background: rgba(255, 255, 255, 0.1); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s; font-size: 1.2rem; }
        .controls-close:hover { background: rgba(255, 0, 0, 0.3); transform: rotate(90deg); }
        .controls-toggle { position: fixed; top: 2rem; right: 2rem; z-index: 999; background: rgba(0, 0, 0, 0.8); border: 2px solid var(--primary); color: white; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; display: none; align-items: center; justify-content: center; backdrop-filter: blur(20px); transition: all 0.3s; font-size: 1.5rem; }
        .controls-toggle.visible { display: flex; }
        .controls-toggle:hover { transform: scale(1.1); box-shadow: 0 0 20px var(--primary); }
        .control-label { font-size: 0.75rem; color: rgba(255, 255, 255, 0.6); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 0.75rem; display: block; }
        .theme-options { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .theme-btn { width: 40px; height: 40px; border-radius: 10px; border: 2px solid transparent; cursor: pointer; transition: all 0.3s; position: relative; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); }
        .theme-btn:hover { transform: scale(1.15); border-color: rgba(255, 255, 255, 0.4); box-shadow: 0 0 30px currentColor; }
        .theme-btn.active { border-color: #ffffff; box-shadow: 0 0 40px currentColor, 0 0 20px #ffffff; transform: scale(1.2); }
        .theme-nebula-btn { background: linear-gradient(135deg, #6495ff, #9d7dff, #00d9ff); }
        .theme-aurora-btn { background: linear-gradient(135deg, #00ff88, #00ffff, #88ff00); }
        .theme-supernova-btn { background: linear-gradient(135deg, #ff6b35, #ff0055, #ffaa00); }
        .theme-galaxy-btn { background: linear-gradient(135deg, #667eea, #764ba2, #f093fb); }
        .theme-creme-btn { background: linear-gradient(135deg, #f9f5f0, #f1e9dc, #d4a574); }
        .theme-void-btn { background: linear-gradient(135deg, #1a1a1a, #4a4a4a, #ffffff); }
        .theme-plasma-btn { background: linear-gradient(135deg, #ff00ff, #00ffff, #ffff00); }
        .theme-solar-btn { background: linear-gradient(135deg, #ffaa00, #ff6600, #ffdd00); }
        .theme-lunar-btn { background: linear-gradient(135deg, #c0c0c0, #e0e0e0, #ffffff); }
        .theme-cosmic-btn { background: linear-gradient(135deg, #ff1493, #00bfff, #7fff00); }
        .font-selector { width: 100%; }
        .font-dropdown, .background-dropdown { width: 100%; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 0.9rem; cursor: pointer; transition: all 0.3s; }
        .font-dropdown option, .background-dropdown option { background: #1a1a1a; color: white; padding: 0.5rem; }
        .background-selector { margin-top: 0.5rem; }

        /* Navigation Bar */
        .header { position: relative; z-index: 10; padding: 1.5rem 4rem; display: flex; justify-content: space-between; align-items: center; background: rgba(10, 14, 39, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid var(--primary); }
        .main-nav { position: relative; z-index: 100; background: rgba(5, 8, 20, 0.95); backdrop-filter: blur(40px) saturate(180%); border-bottom: 1px solid rgba(100, 149, 237, 0.2); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.8); }
        .nav-container { max-width: 1400px; margin: 0 auto; padding: 0 2rem; display: flex; justify-content: center; align-items: center; }
        .nav-links { display: flex; gap: 0.5rem; list-style: none; padding: 0; align-items: center; }
        .nav-link { position: relative; padding: 1.2rem 1.8rem; color: rgba(255, 255, 255, 0.75); text-decoration: none; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; transition: all 0.4s; display: flex; flex-direction: column; align-items: center; gap: 0.4rem; border-radius: 12px; cursor: pointer; }
        .nav-link:hover { color: #ffffff; background: rgba(100, 149, 237, 0.1); transform: translateY(-3px); }
        .nav-link.active { color: var(--primary); background: rgba(100, 149, 237, 0.15); box-shadow: inset 0 -3px 0 var(--primary); }
        .mobile-menu-toggle { display: none; background: rgba(100, 149, 237, 0.1); border: 2px solid var(--primary); color: var(--primary); font-size: 1.5rem; padding: 0.7rem 1.2rem; border-radius: 12px; cursor: pointer; backdrop-filter: blur(10px); }

        @media (max-width: 1024px) {
            .nav-container { justify-content: space-between; }
            .nav-links { position: fixed; top: 0; right: -100%; width: 320px; height: 100vh; background: rgba(5, 8, 20, 0.98); flex-direction: column; padding: 7rem 0 2rem; border-left: 2px solid var(--primary); transition: right 0.5s; gap: 0; justify-content: flex-start; overflow-y: auto; }
            .nav-links.active { right: 0; }
            .mobile-menu-toggle { display: flex; }
            .nav-link { width: 100%; padding: 1.8rem 2rem; flex-direction: row; justify-content: flex-start; gap: 1rem; }
        }

        .logo { font-size: 2.5rem; font-weight: 700; background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 3px; }
        .visitor-badge { display: flex; align-items: center; gap: 1rem; background: rgba(0, 0, 0, 0.5); padding: 0.75rem 1.5rem; border-radius: 50px; border: 1px solid var(--primary); }
        .visitor-count { font-size: 1.5rem; font-weight: 700; color: var(--primary); }
        .visitor-label { font-size: 0.9rem; color: rgba(255, 255, 255, 0.6); text-transform: uppercase; }

        /* Hero */
        .hero { position: relative; z-index: 10; text-align: center; padding: 6rem 2rem 4rem; }
        .hero-title { font-size: clamp(3rem, 8vw, 5rem); font-weight: 700; background: linear-gradient(135deg, #ffffff, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: titleGlow 3s infinite; }
        @keyframes titleGlow { 0%, 100% { filter: drop-shadow(0 0 20px var(--primary)); } 50% { filter: drop-shadow(0 0 40px var(--primary)); } }
        .hero-subtitle { font-size: 1.3rem; color: rgba(255, 255, 255, 0.7); letter-spacing: 2px; }
        .hero-description { color: rgba(255, 255, 255, 0.5); max-width: 600px; margin: 0 auto; line-height: 1.6; }

        /* Nav Cards */
        .nav-section { position: relative; z-index: 10; padding: 4rem 4rem 6rem; max-width: 1400px; margin: 0 auto; }
        .nav-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; }
        .nav-card { position: relative; background: rgba(10, 14, 39, 0.6); border: 1px solid var(--primary); border-radius: 20px; padding: 2.5rem; cursor: pointer; transition: all 0.4s; text-decoration: none; color: inherit; display: block; backdrop-filter: blur(20px); overflow: hidden; }
        .nav-card:hover { transform: translateY(-10px); border-color: var(--accent); box-shadow: 0 20px 60px var(--primary); }
        .nav-icon { width: 60px; height: 60px; margin-bottom: 1.5rem; stroke: var(--primary); filter: drop-shadow(0 0 10px var(--primary)); }
        .nav-title { font-size: 1.8rem; font-weight: 600; margin-bottom: 1rem; color: #ffffff; }
        .nav-description { font-size: 1rem; color: rgba(255, 255, 255, 0.6); line-height: 1.6; }

        /* Polls */
        .polls-section { position: relative; z-index: 10; padding: 6rem 4rem; background: rgba(10, 14, 39, 0.8); border-top: 1px solid var(--primary); }
        .polls-header { text-align: center; margin-bottom: 4rem; }
        .polls-title { font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 700; background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .poll-card { background: rgba(10, 14, 39, 0.8); border: 2px solid var(--primary); border-radius: 20px; padding: 2.5rem; margin-bottom: 2rem; backdrop-filter: blur(30px); }
        .poll-question { font-size: 1.8rem; color: var(--primary); margin-bottom: 2rem; }
        .poll-option { position: relative; padding: 1.5rem; background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 12px; cursor: pointer; transition: all 0.3s; display: flex; justify-content: space-between; margin-bottom: 1rem; overflow: hidden; }
        .poll-option::before { content: ''; position: absolute; left: 0; top: 0; height: 100%; width: var(--vote-percent, 0%); background: linear-gradient(90deg, var(--primary), transparent); opacity: 0.3; z-index: 0; }
        .poll-option.selected { border-color: var(--accent); background: var(--accent); box-shadow: 0 0 20px var(--accent); }
        .poll-option-text { position: relative; z-index: 1; color: white; }
        .poll-submit-btn { padding: 1rem 2.5rem; background: linear-gradient(135deg, var(--primary), var(--secondary)); border: none; color: white; border-radius: 50px; cursor: pointer; margin-top: 1rem; }
        .poll-submit-btn:disabled { opacity: 0.5; }

        /* Debug Panel */
        .debug-panel { position: fixed; bottom: 20px; right: 20px; width: 350px; background: rgba(10, 14, 39, 0.95); border: 2px solid var(--primary); border-radius: 15px; padding: 1.5rem; z-index: 10000; display: none; max-height: 400px; overflow-y: auto; }
        .debug-toggle-btn { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: var(--primary); border: none; border-radius: 50%; color: white; font-size: 1.5rem; cursor: pointer; z-index: 9999; }
        
        /* Footer */
        .footer { position: relative; z-index: 10; text-align: center; padding: 3rem 2rem; color: rgba(255, 255, 255, 0.4); border-top: 1px solid var(--primary); }
        
        /* Planet */
        .orbital-planet { position: fixed; width: 180px; height: 180px; border-radius: 50%; z-index: 0; pointer-events: none; top: 50%; left: 50%; background: radial-gradient(circle, #fff, #555); animation: orbit 60s linear infinite; }
        @keyframes orbit { 0% { transform: rotate(0deg) translateX(250px) rotate(0deg); } 100% { transform: rotate(360deg) translateX(250px) rotate(-360deg); } }
        @media (max-width: 768px) { .orbital-planet { display: none; } }
    </style>
</head>
<body>
    <button class="scroll-to-top" id="scrollToTop"></button>
    <div class="starfield" id="starfield"></div>
    <div id="cursorGravity"></div>
    <div class="orbital-planet"></div>

    <button class="controls-toggle" id="controlsToggle">‚öôÔ∏è</button>

    <header class="header">
        <div class="logo">ASTRONOMY HUB</div>
        <div class="visitor-badge">
            <div>
                <div class="visitor-count" id="visitorCount">0</div>
                <div class="visitor-label">Active Now</div>
            </div>
        </div>
    </header>

    <nav class="main-nav">
        <div class="nav-container">
            <button class="mobile-menu-toggle" id="mobileMenuToggle">‚ò∞</button>
            <ul class="nav-links" id="navLinks">
                <li><a onclick="location.reload()" class="nav-link active"><span class="nav-icon">üè†</span><span>Home</span></a></li>
                <!-- LINKS UPDATED TO FETCH FROM JSDELIVR AND OPEN IN ABOUT:BLANK -->
                <li><a onclick="openFromCdn('movies.html')" class="nav-link"><span class="nav-icon">üé¨</span><span>Movies & Shows</span></a></li>
                <li><a onclick="openFromCdn('games.html')" class="nav-link"><span class="nav-icon">üéÆ</span><span>Games</span></a></li>
                <li><a onclick="openFromCdn('navigation/chatroom.html')" class="nav-link"><span class="nav-icon">üí¨</span><span>Chatroom</span></a></li>
                <li><a onclick="openFromCdn('Cheats/cheats.html')" class="nav-link"><span class="nav-icon">üîì</span><span>Cheats</span></a></li>
                <li><a onclick="openFromCdn('information.html')" class="nav-link"><span class="nav-icon">‚ÑπÔ∏è</span><span>Information</span></a></li>
                <li><a onclick="openFromCdn('support.html')" class="nav-link"><span class="nav-icon">üÜò</span><span>Support</span></a></li>
            </ul>
        </div>
    </nav>

    <!-- Controls Panel -->
    <div class="controls-panel" id="controlsPanel">
        <div class="controls-header">
            <span class="control-label">Cosmic Themes</span>
            <button class="controls-close" id="controlsClose">√ó</button>
        </div>
        <div class="theme-options">
            <button class="theme-btn theme-nebula-btn active" data-theme="theme-nebula"></button>
            <button class="theme-btn theme-aurora-btn" data-theme="theme-aurora"></button>
            <button class="theme-btn theme-supernova-btn" data-theme="theme-supernova"></button>
            <button class="theme-btn theme-galaxy-btn" data-theme="theme-galaxy"></button>
            <button class="theme-btn theme-creme-btn" data-theme="theme-creme"></button>
            <button class="theme-btn theme-void-btn" data-theme="theme-void"></button>
            <button class="theme-btn theme-plasma-btn" data-theme="theme-plasma"></button>
            <button class="theme-btn theme-solar-btn" data-theme="theme-solar"></button>
            <button class="theme-btn theme-lunar-btn" data-theme="theme-lunar"></button>
            <button class="theme-btn theme-cosmic-btn" data-theme="theme-cosmic"></button>
        </div>
        <span class="control-label">Font Style</span>
        <div class="font-selector">
            <select class="font-dropdown" id="fontSelector">
                <option value="DripOctober">Drip October</option>
                <option value="Chainsaw Carnage">Chainsaw Carnage</option>
                <option value="Halloween">Halloween</option>
                <option value="CrotahItalic">Crotah Italic</option>
                <option value="Dangernight">Dangernight</option>
                <option value="HeavyJack">Heavy Jack</option>
                <option value="Marlita">Marlita</option>
                <option value="MockBear">Mock Bear</option>
                <option value="Mulinarstamp">Mulinarstamp</option>
                <option value="UnderThreat">Under Threat</option>
                <option value="BlackDahlia">Black Dahlia</option>
            </select>
        </div>
        <span class="control-label">Background Style</span>
        <div class="background-selector">
            <select class="background-dropdown" id="backgroundSelector">
                <option value="stars">Starfield (Default)</option>
                <option value="rain">Rainy Day</option>
                <option value="rocket">Rocket Ship</option>
                <option value="snow">Snowfall</option>
                <option value="matrix">Matrix Code</option>
                <option value="nebula">Nebula Cloud</option>
                <option value="pixel">Pixel Art</option>
                <option value="aurora">Aurora Waves</option>
                <option value="meteor">Meteor Shower</option>
                <option value="fireflies">Fireflies Night</option>
                <option value="underwater">Underwater</option>
                <option value="lightning">Lightning Storm</option>
                <option value="cherry">Cherry Blossom</option>
                <option value="vortex">Cosmic Vortex</option>
            </select>
        </div>
    </div>

    <section class="hero">
        <h1 class="hero-title">KRIPTIC EDITION 3.0</h1>
        <p class="hero-subtitle">VERSION 3.0</p>
        <p class="hero-description">Your professional gateway to entertainment, games, and community interaction.</p>
    </section>

    <!-- Ads -->
    <div style="text-align: center; padding: 2rem 0; position: relative; z-index: 10;">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7452690493067355" data-ad-slot="5169295107" data-ad-format="auto" data-full-width-responsive="true"></ins>
    </div>

    <!-- Nav Grid -->
    <section class="nav-section">
        <div class="nav-grid">
            <a onclick="openFromCdn('movies.html')" class="nav-card">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z" /></svg>
                <h3 class="nav-title">Movies & Shows</h3>
                <p class="nav-description">176+ curated movies and TV shows in a premium Netflix-style interface.</p>
            </a>
            <a onclick="openFromCdn('games.html')" class="nav-card">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z" /></svg>
                <h3 class="nav-title">Games</h3>
                <p class="nav-description">50+ embedded games with instant launch technology.</p>
            </a>
            <a onclick="openFromCdn('information.html')" class="nav-card">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <h3 class="nav-title">Information</h3>
                <p class="nav-description">Platform details, development journey, and technical specifications.</p>
            </a>
            <a onclick="openFromCdn('support.html')" class="nav-card">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                <h3 class="nav-title">Support</h3>
                <p class="nav-description">Get help, report issues, and connect with the community.</p>
            </a>
            <a onclick="openFromCdn('Cheats/cheats.html')" class="nav-card">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                <h3 class="nav-title">Cheats</h3>
                <p class="nav-description">Game cheats, tools, and utilities.</p>
            </a>
            <a href="#polls" class="nav-card">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                <h3 class="nav-title">Community Polls</h3>
                <p class="nav-description">Vote on polls and see real-time results.</p>
            </a>
        </div>
    </section>

    <!-- Polls Section -->
    <section class="polls-section" id="polls">
        <div class="polls-header">
            <h2 class="polls-title">Community Polls</h2>
            <p class="polls-subtitle">Make your voice heard</p>
        </div>
        <div id="pollContainer">
            <div class="poll-loading">Loading polls...</div>
        </div>
    </section>

    <footer class="footer">
        <p>KRIPTIC EDITION 3.0 ¬© 2025 | Built with dedication over 600+ days</p>
    </footer>

    <!-- Debug Panel -->
    <button id="debugToggle" class="debug-toggle-btn" onclick="toggleDebugPanel()">üîç</button>
    <div id="debugPanel" class="debug-panel">
        <div class="debug-panel-header"><div class="debug-panel-title">üìä Poll System Status</div><button class="debug-close-btn" onclick="toggleDebugPanel()">√ó</button></div>
        <div class="debug-section"><div class="debug-section-title">System Status</div><div id="systemStatus" class="debug-status info"><div class="debug-log">Initializing...</div></div></div>
    </div>

    <div style="position: relative; z-index: 10; text-align: center; padding: 4rem 2rem 2rem; background: rgba(10, 14, 39, 0.95); border-top: 1px solid var(--primary); margin-top: 2rem;">
        <div style="max-width: 900px; margin: 0 auto; font-style: italic; color: rgba(255, 255, 255, 0.7); font-size: 1.1rem; line-height: 1.8; text-shadow: 0 0 10px var(--primary);">
            "He who walketh 'mongst the filth of swine, where rot is sacred and madness ferments, knoweth well their plague born secrets."
        </div>
        <div style="margin-top: 1rem; color: var(--primary); font-size: 0.9rem;">‚Äî Roland</div>
    </div>

    <script>
        // Google Analytics
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Z2W798YNJP');

        // ===== FUNCTION TO FETCH JSDELIVR CONTENT & OPEN IN ABOUT:BLANK =====
        async function openFromCdn(filename) {
            // Define the base path for your repo on jsdelivr
            const repoBase = 'https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/';
            const url = repoBase + filename;

            try {
                // Fetch the raw code
                const response = await fetch(url);
                if (!response.ok) throw new Error('Network response was not ok');
                let html = await response.text();

                // Determine base directory for relative links
                // e.g., if opening "Cheats/cheats.html", base should be ".../Cheats/"
                let directory = repoBase;
                if (filename.includes('/')) {
                    const parts = filename.split('/');
                    parts.pop(); // remove filename
                    directory = repoBase + parts.join('/') + '/';
                }

                // Inject <base> tag so relative links (css/js/images) work
                const baseTag = `<base href="${directory}">`;
                if (html.includes('<head>')) {
                    html = html.replace('<head>', `<head>${baseTag}`);
                } else {
                    html = baseTag + html;
                }

                // Open new window (about:blank) and write the content
                const win = window.open('about:blank', '_blank');
                if (win) {
                    win.document.write(html);
                    win.document.close();
                } else {
                    alert('Please allow popups for this site to view the content.');
                }
            } catch (error) {
                console.error('Error fetching page:', error);
                alert('Failed to load page content from CDN.');
            }
        }

        // ===== THEME MANAGER (Using jsDelivr for JS files) =====
        const ThemeManager = {
            loadedScripts: {},
            themeMapping: {
                'stars': { file: 'starfield', func: 'theme_starfield' },
                'rain': { file: 'rainy-day', func: 'theme_rainy_day' },
                'rocket': { file: 'rocket-ship', func: 'theme_rocket_ship' },
                'snow': { file: 'snowfall', func: 'theme_snowfall' },
                'matrix': { file: 'matrix-code', func: 'theme_matrix_code' },
                'nebula': { file: 'nebula-cloud', func: 'theme_nebula_cloud' },
                'pixel': { file: 'pixel-art', func: 'theme_pixel_art' },
                'aurora': { file: 'aurora-waves', func: 'theme_aurora_waves' },
                'meteor': { file: 'meteor-shower', func: 'theme_meteor_shower' },
                'fireflies': { file: 'fireflies-night', func: 'theme_fireflies_night' },
                'underwater': { file: 'underwater', func: 'theme_underwater' },
                'lightning': { file: 'lightning-storm', func: 'theme_lightning_storm' },
                'cherry': { file: 'cherry-blossom', func: 'theme_cherry_blossom' },
                'vortex': { file: 'cosmic-vortex', func: 'theme_cosmic_vortex' }
            },
            
            async loadTheme(themeName) {
                try {
                    const themeConfig = this.themeMapping[themeName];
                    if (!themeConfig) return;
                    if (this.loadedScripts[themeName]) { this.executeTheme(themeName); return; }
                    
                    const script = document.createElement('script');
                    // Pointing to jsDelivr for script loading
                    script.src = `https://cdn.jsdelivr.net/gh/Rolandelving/Kriptic-Edition-3.0@main/Themes/${themeConfig.file}.js`;
                    script.onload = () => { this.loadedScripts[themeName] = true; this.executeTheme(themeName); };
                    document.head.appendChild(script);
                } catch (error) { console.error('Theme load error:', error); }
            },
            
            executeTheme(themeName) {
                const themeConfig = this.themeMapping[themeName];
                if (typeof window[themeConfig.func] === 'function') {
                    // Cleanup previous
                    const s = document.getElementById('starfield');
                    if(s) { s.innerHTML = ''; s.style.background = ''; }
                    window[themeConfig.func]();
                    localStorage.setItem('kripticBackground', themeName);
                }
            }
        };

        async function changeBackground(type) { await ThemeManager.loadTheme(type); }

        // ===== CONTROLS PANEL =====
        const controlsPanel = document.getElementById('controlsPanel');
        const controlsToggle = document.getElementById('controlsToggle');
        const controlsClose = document.getElementById('controlsClose');
        
        controlsClose.addEventListener('click', () => { controlsPanel.classList.add('collapsed'); controlsToggle.classList.add('visible'); });
        controlsToggle.addEventListener('click', () => { controlsPanel.classList.remove('collapsed'); controlsToggle.classList.remove('visible'); });

        // Themes
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.dataset.theme;
                document.body.className = theme;
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                localStorage.setItem('kripticTheme', theme);
            });
        });

        // Fonts
        const fontSelector = document.getElementById('fontSelector');
        fontSelector.addEventListener('change', (e) => {
            document.body.style.fontFamily = `'${e.target.value}', 'Segoe UI', sans-serif`;
            localStorage.setItem('kripticFont', e.target.value);
        });

        // Backgrounds
        const bgSelector = document.getElementById('backgroundSelector');
        bgSelector.addEventListener('change', (e) => changeBackground(e.target.value));

        // Load Saved Preferences
        const savedTheme = localStorage.getItem('kripticTheme');
        if(savedTheme) document.body.className = savedTheme;
        
        const savedFont = localStorage.getItem('kripticFont');
        if(savedFont) { document.body.style.fontFamily = `'${savedFont}', 'Segoe UI', sans-serif`; fontSelector.value = savedFont; }
        
        let savedBg = localStorage.getItem('kripticBackground') || 'stars';
        bgSelector.value = savedBg;
        setTimeout(() => changeBackground(savedBg), 500);

        // ===== SUPABASE & POLLS (Restored) =====
        const SUPABASE_URL = 'https://zkrdbvjmessktzlxommr.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InprcmRidmptZXNza3R6bHhvbW1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4ODMzNzUsImV4cCI6MjA2ODQ1OTM3NX0.XDNQGD7Jl-2zmjFyfGVFRjdq-9rVFfhCyExfO8Fzb7Q';
        let pollSupabase;
        let polls = [];
        let selectedOptions = {};

        function initSupabase() {
            if(window.supabase) {
                pollSupabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                fetchPolls();
                document.getElementById('systemStatus').innerHTML = '<div class="debug-log" style="color:#00ff88">Connected to Supabase</div>';
            } else setTimeout(initSupabase, 500);
        }

        async function fetchPolls() {
            const { data, error } = await pollSupabase.from('polls').select('*').eq('active', true);
            if(data) {
                polls = data.map(poll => {
                    const options = [], votes = [];
                    for(let i=1; i<=5; i++) if(poll[`option${i}`]) { options.push(poll[`option${i}`]); votes.push(poll[`votes${i}`]||0); }
                    return { id: poll.id, question: poll.question, options, votes };
                });
                renderPolls();
            }
        }

        function renderPolls() {
            const container = document.getElementById('pollContainer');
            if(!polls.length) return;
            container.innerHTML = polls.map(poll => {
                const total = poll.votes.reduce((a,b)=>a+b,0);
                const voted = document.cookie.includes(`pollVoted_${poll.id}=true`);
                const selected = selectedOptions[poll.id];
                
                return `<div class="poll-card">
                    ${voted ? '<div class="poll-message success">‚úÖ Voted</div>' : ''}
                    <h3 class="poll-question">${poll.question}</h3>
                    ${poll.options.map((opt, i) => `
                        <div class="poll-option ${selected===i?'selected':''} ${voted?'disabled':''}"
                             onclick="${!voted ? `selectOption('${poll.id}', ${i})` : ''}"
                             style="--vote-percent:${total ? (poll.votes[i]/total*100) : 0}%">
                            <span class="poll-option-text">${opt}</span>
                            <span>${poll.votes[i]} (${total ? Math.round(poll.votes[i]/total*100) : 0}%)</span>
                        </div>
                    `).join('')}
                    <button class="poll-submit-btn" onclick="vote('${poll.id}')" ${voted || selected===undefined ? 'disabled' : ''}>Vote</button>
                </div>`;
            }).join('');
        }

        window.selectOption = (id, idx) => { selectedOptions[id] = idx; renderPolls(); };
        window.vote = async (id) => {
            const idx = selectedOptions[id];
            const poll = polls.find(p=>p.id===id);
            const update = {}; update[`votes${idx+1}`] = poll.votes[idx]+1;
            await pollSupabase.from('polls').update(update).eq('id', id);
            document.cookie = `pollVoted_${id}=true; max-age=31536000`;
            fetchPolls();
        };

        // ===== FIREBASE VISITOR COUNTER =====
        const firebaseConfig = { apiKey: "AIzaSyBf86NMHrnOCUui_2VFF00wwehencFzF0Y", databaseURL: "https://kriptic-edition-default-rtdb.firebaseio.com", projectId: "kriptic-edition", appId: "1:208515615130:web:2f94d2afdea3a668f91223" };
        try {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.database().ref('visitors');
            db.on('value', s => document.getElementById('visitorCount').textContent = s.numChildren());
            // Simple session registration
            const session = Date.now() + Math.random();
            db.child(session).set({ timestamp: firebase.database.ServerValue.TIMESTAMP });
            db.child(session).onDisconnect().remove();
        } catch(e) {}

        // ===== UI EXTRAS =====
        const cursor = document.getElementById('cursorGravity');
        document.addEventListener('mousemove', e => cursor.style.transform = `translate(${e.clientX-150}px, ${e.clientY-150}px)`);
        
        const mobMenu = document.getElementById('mobileMenuToggle');
        mobMenu.addEventListener('click', () => document.getElementById('navLinks').classList.toggle('active'));
        
        window.toggleDebugPanel = () => {
            const p = document.getElementById('debugPanel');
            p.style.display = p.style.display === 'none' ? 'block' : 'none';
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            initSupabase();
        });
    </script>
    
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</body>
</html>