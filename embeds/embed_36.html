<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <audio src="https://cdn.jsdelivr.net/gh/shayderrr/Static@main/Ambient-BreakcoreDnB-Mix-02.mp3" autoplay loop></audio>
    <title>Galactic Gateway - Cosmic File Operations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Space Grotesk', 'Inter', system-ui, -apple-system, sans-serif;
        }

        body {
            min-height: 100vh;
            background: #000000;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated galaxy background */
        .galaxy-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at top left, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(168, 85, 247, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse at center, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                linear-gradient(180deg, #000000 0%, #0f0520 50%, #000000 100%);
            z-index: 0;
        }

        /* Animated stars */
        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, white, transparent),
                radial-gradient(2px 2px at 40px 70px, white, transparent),
                radial-gradient(1px 1px at 50px 50px, white, transparent),
                radial-gradient(1px 1px at 80px 80px, white, transparent),
                radial-gradient(2px 2px at 150px 150px, white, transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            opacity: 0.3;
            animation: starsFloat 200s linear infinite;
            z-index: 1;
        }

        .stars-2 {
            position: fixed;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(1px 1px at 25px 25px, white, transparent),
                radial-gradient(1px 1px at 75px 75px, white, transparent),
                radial-gradient(1px 1px at 125px 125px, white, transparent);
            background-repeat: repeat;
            background-size: 250px 250px;
            opacity: 0.2;
            animation: starsFloat 300s linear infinite reverse;
            z-index: 1;
        }

        @keyframes starsFloat {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }

        /* Floating orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.3;
            animation: float 20s ease-in-out infinite;
            z-index: 2;
        }

        .orb-1 {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            top: -150px;
            left: -100px;
            animation-duration: 25s;
        }

        .orb-2 {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            bottom: -200px;
            right: -150px;
            animation-duration: 30s;
            animation-delay: -10s;
        }

        .orb-3 {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #a78bfa, #c4b5fd);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-duration: 35s;
            animation-delay: -15s;
        }

        @keyframes float {
            0%, 100% { 
                transform: translate(0, 0) scale(1);
            }
            33% { 
                transform: translate(100px, -100px) scale(1.1);
            }
            66% { 
                transform: translate(-100px, 100px) scale(0.9);
            }
        }

        /* Glassmorphism card */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 8px 32px 0 rgba(139, 92, 246, 0.1),
                inset 0 2px 0 0 rgba(255, 255, 255, 0.05);
            position: relative;
            z-index: 10;
        }

        /* Dreamy glow effect */
        .glow {
            position: relative;
        }

        .glow::before {
            content: '';
            position: absolute;
            inset: -2px;
            background: linear-gradient(135deg, #a78bfa, #8b5cf6, #a78bfa);
            background-size: 200% 200%;
            border-radius: inherit;
            filter: blur(15px);
            opacity: 0;
            transition: opacity 0.5s ease;
            animation: glowShift 4s ease-in-out infinite;
            z-index: -1;
        }

        .glow:hover::before {
            opacity: 0.5;
        }

        @keyframes glowShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Navigation tabs */
        .nav-tab {
            position: relative;
            padding: 0.75rem 1.5rem;
            border-radius: 1rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.6);
            transition: all 0.3s ease;
            cursor: pointer;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent, rgba(139, 92, 246, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .nav-tab:hover::before {
            transform: translateX(100%);
        }

        .nav-tab:hover {
            color: rgba(255, 255, 255, 0.9);
            background: rgba(139, 92, 246, 0.1);
        }

        .nav-tab.active {
            color: #ffffff;
            background: rgba(139, 92, 246, 0.2);
            box-shadow: 
                0 0 20px rgba(139, 92, 246, 0.3),
                inset 0 0 20px rgba(139, 92, 246, 0.1);
        }

        /* Dreamy buttons */
        .dream-button {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.8), rgba(124, 58, 237, 0.8));
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .dream-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .dream-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .dream-button:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 10px 40px rgba(139, 92, 246, 0.4),
                0 0 60px rgba(139, 92, 246, 0.2);
        }

        .dream-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .dream-button:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* Form inputs */
        .cosmic-input, .cosmic-select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.95rem;
            transition: all 0.3s ease;
            outline: none;
        }

        .cosmic-input:focus, .cosmic-select:focus {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.2);
        }

        .cosmic-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .cosmic-select {
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="rgba(255,255,255,0.6)" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            cursor: pointer;
        }

        .cosmic-select option {
            background: #1a1a2e;
            color: white;
        }

        /* Textarea styling */
        textarea {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            scrollbar-width: thin;
            scrollbar-color: rgba(139, 92, 246, 0.3) transparent;
        }

        textarea:focus {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.2);
            outline: none;
        }

        textarea::-webkit-scrollbar {
            width: 8px;
        }

        textarea::-webkit-scrollbar-track {
            background: transparent;
        }

        textarea::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 4px;
        }

        textarea::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.5);
        }

        /* Drop zone */
        .drop-zone {
            background: rgba(255, 255, 255, 0.02);
            border: 2px dashed rgba(139, 92, 246, 0.3);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .drop-zone::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, rgba(139, 92, 246, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .drop-zone:hover::before,
        .drop-zone.active::before {
            opacity: 1;
        }

        .drop-zone.active {
            border-color: rgba(139, 92, 246, 0.8);
            background: rgba(139, 92, 246, 0.05);
            box-shadow: 
                inset 0 0 30px rgba(139, 92, 246, 0.1),
                0 0 50px rgba(139, 92, 246, 0.2);
        }

        /* Logo pulse */
        .logo-pulse {
            animation: logoPulse 3s ease-in-out infinite;
        }

        @keyframes logoPulse {
            0%, 100% { 
                transform: scale(1);
                filter: brightness(1);
            }
            50% { 
                transform: scale(1.05);
                filter: brightness(1.2);
            }
        }

        /* Notification */
        .notification {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }

        /* Content sections */
        .content-section {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
            position: absolute;
            width: 100%;
        }

        .content-section.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
            position: relative;
        }

        /* Cosmic badges */
        .cosmic-badge {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        /* Feature cards */
        .feature-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s ease;
        }

        .feature-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(139, 92, 246, 0.3);
            transform: translateY(-5px);
            box-shadow: 
                0 10px 40px rgba(139, 92, 246, 0.2),
                inset 0 0 30px rgba(139, 92, 246, 0.05);
        }

        /* Status indicator */
        .status-dot {
            width: 8px;
            height: 8px;
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            border-radius: 50%;
            animation: statusPulse 2s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }

        @keyframes statusPulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 1;
            }
            50% { 
                transform: scale(1.2);
                opacity: 0.7;
            }
        }

        /* Preview image */
        .preview-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }

        /* Form label */
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
        }

        /* File hint */
        .file-hint {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: rgba(255, 255, 255, 0.8);
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            margin-top: 1rem;
            text-align: center;
        }

        /* Clear button in textarea */
        .clear-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 4px 12px;
            font-size: 0.75rem;
            border-radius: 6px;
            background: rgba(239, 68, 68, 0.8);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .clear-btn:hover {
            background: rgba(239, 68, 68, 1);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <!-- Galaxy background elements -->
    <div class="galaxy-bg"></div>
    <div class="stars"></div>
    <div class="stars-2"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <!-- Main container -->
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="glass-card w-full max-w-5xl rounded-3xl p-8 md:p-10">
            <!-- Header -->
            <div class="text-center mb-10">
                <div class="flex justify-center mb-6">
                    <div class="logo-pulse glow inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-purple-600 via-purple-500 to-purple-700 shadow-2xl">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                </div>
                <h1 class="text-5xl font-bold text-white mb-3">
                    Galactic Gateway
                </h1>
                <p class="text-purple-200 text-sm tracking-widest uppercase">Cosmic File Operations Suite</p>
            </div>

            <!-- Navigation -->
            <div class="flex justify-center space-x-3 mb-10 flex-wrap gap-2">
                <div class="nav-tab active" id="launcherTab" onclick="switchToMode('launcher')">
                    <span class="flex items-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                        </svg>
                        <span>Launcher</span>
                    </span>
                </div>
                <div class="nav-tab" id="stegoTab" onclick="switchToMode('stego')">
                    <span class="flex items-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                        <span>Steganography</span>
                    </span>
                </div>
                <div class="nav-tab" id="aboutTab" onclick="switchToMode('about')">
                    <span class="flex items-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span>About</span>
                    </span>
                </div>
            </div>

            <!-- Notification Area -->
            <div id="notificationArea" class="hidden mb-6"></div>

            <!-- Drop Zone -->
            <div id="dropZone" class="drop-zone rounded-2xl p-10 mb-8 text-center cursor-pointer">
                <div class="pointer-events-none">
                    <svg class="w-16 h-16 mx-auto mb-4 text-purple-300 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                    <p class="text-purple-200 font-medium mb-2 text-lg">Drop your files into the cosmos</p>
                    <p class="text-purple-300 text-sm opacity-60" id="dropZoneHint">or click to explore ‚Ä¢ .html, .md, images</p>
                </div>
                <input type="file" id="fileInput" class="hidden" accept=".html,.md,.markdown,.jpg,.jpeg,.png,.gif,.webp,.svg,.bmp,.ico">
            </div>

            <!-- Content Container with relative positioning for sections -->
            <div class="relative min-h-[500px]">
                <!-- Launcher Mode -->
                <div id="launcherContent" class="content-section active">
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-purple-200 mb-4 flex items-center">
                            <div class="w-2 h-2 rounded-full bg-gradient-to-r from-purple-400 to-purple-600 mr-3"></div>
                            Code Editor
                        </h3>
                        <div style="position: relative;">
                            <textarea
                                id="htmlCode"
                                rows="10"
                                placeholder="Paste HTML or Markdown code here..."
                                class="w-full p-4 text-sm font-mono rounded-xl resize-none transition-all duration-300" style="color: white;"
                            ></textarea>
                        </div>
                    </div>

                    <!-- Page Title -->
                    <div class="mb-6">
                        <label class="form-label">Page Title</label>
                        <input type="text" id="pageName" class="cosmic-input" placeholder="Name your page (optional)">
                    </div>

                    <!-- Favicon Selection -->
                    <div class="mb-6">
                        <label class="form-label">Favicon</label>
                        <select id="faviconSelect" class="cosmic-select">
                            <option value="">None (default)</option>
                            <option value="https://www.google.com/favicon.ico">Google Search</option>
                            <option value="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico">Google Docs</option>
                            <option value="https://ssl.gstatic.com/docs/spreadsheets/favicon3.ico">Google Sheets</option>
                            <option value="https://ssl.gstatic.com/docs/presentations/images/favicon5.ico">Google Slides</option>
                            <option value="https://ssl.gstatic.com/classroom/favicon.ico">Google Classroom</option>
                            <option value="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico">Gmail</option>
                            <option value="https://music.youtube.com/img/favicon_32.png">YouTube Music</option>
                            <option value="https://maps.gstatic.com/favicon3.ico">Google Maps</option>
                            <option value="https://www.gstatic.com/earth/00-favicon.ico">Google Earth</option>
                            <option value="https://www.gstatic.com/android/market_images/web/favicon_v3.ico">Google Play</option>
                            <option value="https://www.gstatic.com/images/branding/product/1x/keep_48dp.png">Google Keep</option>
                            <option value="https://wallet.google.com/favicon.ico">Google Wallet</option>
                            <option value="https://scholar.google.com/favicon.ico">Google Scholar</option>
                            <option value="https://www.gstatic.com/images/branding/product/1x/photos_48dp.png">Google Photos</option>
                            <option value="https://fiber.google.com/favicon.ico">Google Fiber</option>
                            <option value="https://instructure-uploads.s3.amazonaws.com/account_30000000002042/attachments/80746393/favicon-16x16.png">Canvas</option>
                            <option value="custom">Custom</option>
                        </select>
                        <input type="text" id="customFaviconBox" class="cosmic-input mt-3 hidden" placeholder="Enter custom favicon URL">
                    </div>

                    <!-- Options Row -->
                    <div class="grid md:grid-cols-3 gap-4 mb-6">
                        <div>
                            <label class="form-label">Page Type</label>
                            <select id="pageType" class="cosmic-select">
                                <option value="tab">New Tab</option>
                                <option value="window">New Window</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Source</label>
                            <select id="sourceType" class="cosmic-select">
                                <option value="blank">about:blank</option>
                                <option value="blob">Blob URL</option>
                                <option value="filelink">File Link</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Data Format</label>
                            <select id="dataType" class="cosmic-select">
                                <option value="html">HTML</option>
                                <option value="dataencode">Data Encode</option>
                                <option value="markdown">Markdown</option>
                            </select>
                        </div>
                    </div>

                    <!-- File Hint (shown for filelink mode) -->
                    <div id="fileHint" class="file-hint hidden">
                        üìÅ Open the downloaded file in your Files app to view the contents
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex items-center justify-between mt-6 flex-wrap gap-3">
                        <button
                            id="actionBtn"
                            onclick="launchContent()"
                            class="dream-button glow px-8 py-3 font-semibold rounded-xl shadow-lg"
                        >
                            <span class="flex items-center space-x-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                                <span id="actionBtnText">Launch into Space</span>
                            </span>
                        </button>
                        <div class="flex space-x-3">
                            <button onclick="clearAll()" class="cosmic-badge px-4 py-2 rounded-lg text-sm font-medium hover:scale-105 transition">
                                Clear All
                            </button>
                            <button onclick="loadSample()" class="cosmic-badge px-4 py-2 rounded-lg text-sm font-medium hover:scale-105 transition">
                                Sample
                            </button>
                        </div>
                    </div>

                    <!-- Info Cards -->
                    <div class="grid md:grid-cols-2 gap-6 mt-8">
                        <div class="feature-card rounded-xl p-5">
                            <h4 class="font-semibold text-purple-200 mb-3 flex items-center">
                                <div class="status-dot mr-2"></div>
                                Supported Formats
                            </h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">HTML</span>
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">Markdown</span>
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">Data URI</span>
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">PNG</span>
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">JPG</span>
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">GIF</span>
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">SVG</span>
                                <span class="cosmic-badge px-3 py-1 rounded-full text-xs">WebP</span>
                            </div>
                        </div>
                        <div class="feature-card rounded-xl p-5">
                            <h4 class="font-semibold text-purple-200 mb-3 flex items-center">
                                <div class="status-dot mr-2"></div>
                                Status
                            </h4>
                            <p class="text-purple-300 text-sm">System operational ‚Ä¢ Ready for launch</p>
                        </div>
                    </div>
                </div>

                <!-- Steganography Mode -->
                <div id="stegoContent" class="content-section">
                    <div class="mb-8">
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold text-purple-200 mb-4 flex items-center">
                                <div class="w-2 h-2 rounded-full bg-gradient-to-r from-purple-600 to-purple-400 mr-3"></div>
                                LSB Steganography - Hide HTML in Images
                            </h3>
                            <div id="stegoStatus" class="cosmic-badge inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium mb-4">
                                <div class="status-dot mr-2"></div>
                                <span>Ready for quantum encoding</span>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <label class="form-label">Secret HTML Code</label>
                            <textarea
                                id="secretMessage"
                                rows="8"
                                placeholder="Enter HTML code to hide inside an image..."
                                class="w-full p-4 text-sm font-mono rounded-xl resize-none transition-all duration-300"
                                style="color: white;"
                            ></textarea>
                        </div>

                        <!-- Image Preview -->
                        <div id="imagePreview" class="hidden mb-6 text-center">
                            <p class="text-sm text-purple-300 mb-2">Carrier Image:</p>
                            <img id="previewImg" class="preview-image mx-auto" alt="Carrier Image">
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <button
                                onclick="encodeMessage()"
                                class="dream-button glow px-6 py-3 font-semibold rounded-xl shadow-lg"
                            >
                                <span class="flex items-center justify-center space-x-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                    </svg>
                                    <span>Encode HTML ‚Üí PNG</span>
                                </span>
                            </button>
                            <button
                                onclick="decodeMessage()"
                                class="dream-button glow px-6 py-3 font-semibold rounded-xl shadow-lg"
                            >
                                <span class="flex items-center justify-center space-x-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path>
                                    </svg>
                                    <span>Decode PNG ‚Üí HTML</span>
                                </span>
                            </button>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <button
                                onclick="generateCarrierImage()"
                                class="cosmic-badge px-4 py-2 rounded-lg text-sm font-medium hover:scale-105 transition"
                            >
                                <span class="flex items-center justify-center space-x-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <span>Generate Carrier Image</span>
                                </span>
                            </button>
                            <button
                                onclick="clearStego()"
                                class="cosmic-badge px-4 py-2 rounded-lg text-sm font-medium hover:scale-105 transition"
                            >
                                Clear All
                            </button>
                        </div>
                    </div>

                    <div class="feature-card rounded-xl p-5">
                        <h4 class="font-semibold text-purple-200 mb-3">How It Works</h4>
                        <ol class="text-sm text-purple-300 space-y-2">
                            <li class="flex items-start">
                                <span class="text-purple-400 mr-2 font-bold">1.</span>
                                <span><strong>Upload a PNG image</strong> (or generate one) to use as the carrier</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-purple-400 mr-2 font-bold">2.</span>
                                <span><strong>Enter your HTML code</strong> in the secret message field</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-purple-400 mr-2 font-bold">3.</span>
                                <span><strong>Click "Encode"</strong> to hide the HTML inside the image using LSB algorithm</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-purple-400 mr-2 font-bold">4.</span>
                                <span><strong>Download</strong> the encoded PNG image (looks identical to original)</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-purple-400 mr-2 font-bold">5.</span>
                                <span><strong>To extract:</strong> Upload the encoded PNG and click "Decode" to reveal and launch the hidden HTML</span>
                            </li>
                        </ol>
                        <div class="mt-4 p-3 bg-purple-900/20 rounded-lg border border-purple-500/20">
                            <p class="text-xs text-purple-300"><strong>Note:</strong> The LSB (Least Significant Bit) technique modifies the least significant bits of pixel data, making changes invisible to the human eye. Your HTML code is securely hidden within the image!</p>
                        </div>
                    </div>
                </div>

                <!-- About Mode -->
                <div id="aboutContent" class="content-section">
                    <div class="text-center py-8">
                        <p class="text-purple-200 mb-10 max-w-2xl mx-auto leading-relaxed">
                            A cosmic gateway for file operations. Launch HTML and Markdown into the digital cosmos, 
                            preview celestial images, customize page settings, and hide secrets within the quantum fabric of PNG files using advanced LSB steganography.
                        </p>
                        <div class="grid md:grid-cols-3 gap-6 max-w-3xl mx-auto">
                            <div class="feature-card rounded-2xl p-6">
                                <div class="w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center mb-4 mx-auto">
                                    <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-purple-200 mb-2">Intelligent</h3>
                                <p class="text-sm text-purple-300">Smart file detection, Markdown parsing, and LSB encoding</p>
                            </div>
                            <div class="feature-card rounded-2xl p-6">
                                <div class="w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center mb-4 mx-auto">
                                    <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-purple-200 mb-2">Secure</h3>
                                <p class="text-sm text-purple-300">Client-side processing only - your data never leaves your device</p>
                            </div>
                            <div class="feature-card rounded-2xl p-6">
                                <div class="w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center mb-4 mx-auto">
                                    <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-purple-200 mb-2">Instant</h3>
                                <p class="text-sm text-purple-300">Lightning-fast operations and HTML/Markdown rendering</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <canvas id="stegoCanvas" style="display: none;"></canvas>
        </div>
    </div>

    <script>
        // State Management
        let currentMode = 'launcher';
        let carrierImage = null;
        let droppedFile = null;
        let droppedContent = null;

        // DOM Elements
        const dropZone = document.getElementById('dropZone');
        const dropZoneHint = document.getElementById('dropZoneHint');
        const fileInput = document.getElementById('fileInput');
        const htmlCode = document.getElementById('htmlCode');
        const pageName = document.getElementById('pageName');
        const faviconSelect = document.getElementById('faviconSelect');
        const customFaviconBox = document.getElementById('customFaviconBox');
        const pageType = document.getElementById('pageType');
        const sourceType = document.getElementById('sourceType');
        const dataType = document.getElementById('dataType');
        const actionBtn = document.getElementById('actionBtn');
        const actionBtnText = document.getElementById('actionBtnText');
        const fileHint = document.getElementById('fileHint');
        const secretMessage = document.getElementById('secretMessage');
        const stegoCanvas = document.getElementById('stegoCanvas');
        const notificationArea = document.getElementById('notificationArea');
        const stegoStatus = document.getElementById('stegoStatus');
        const imagePreview = document.getElementById('imagePreview');
        const previewImg = document.getElementById('previewImg');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
        });

        function setupEventListeners() {
            // File input
            dropZone.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);
            
            // Drag and drop
            dropZone.addEventListener('dragover', handleDragOver);
            dropZone.addEventListener('dragleave', handleDragLeave);
            dropZone.addEventListener('drop', handleDrop);
            
            // Prevent default drag behavior
            document.addEventListener('dragover', (e) => e.preventDefault());
            document.addEventListener('drop', (e) => e.preventDefault());

            // Favicon select
            faviconSelect.addEventListener('change', () => {
                customFaviconBox.classList.toggle('hidden', faviconSelect.value !== 'custom');
            });

            // Source type change
            sourceType.addEventListener('change', () => {
                if (sourceType.value === 'filelink') {
                    actionBtnText.textContent = 'Download File';
                    fileHint.classList.remove('hidden');
                    pageType.disabled = true;
                } else {
                    actionBtnText.textContent = 'Launch into Space';
                    fileHint.classList.add('hidden');
                    pageType.disabled = false;
                }
            });
        }

        function handleDragOver(e) {
            e.preventDefault();
            dropZone.classList.add('active');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            dropZone.classList.remove('active');
        }

        function handleDrop(e) {
            e.preventDefault();
            dropZone.classList.remove('active');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                processFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            const files = e.target.files;
            if (files.length > 0) {
                processFile(files[0]);
            }
        }

        function processFile(file) {
            const fileName = file.name;
            const fileExt = fileName.split('.').pop().toLowerCase();
            
            droppedFile = file;
            
            if (currentMode === 'launcher') {
                if (fileExt === 'html') {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        htmlCode.value = e.target.result;
                        dataType.value = 'html';
                        showNotification(`‚ú® HTML file "${fileName}" loaded`, 'success');
                    };
                    reader.readAsText(file);
                } else if (fileExt === 'md' || fileExt === 'markdown') {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        htmlCode.value = e.target.result;
                        dataType.value = 'markdown';
                        showNotification(`üìù Markdown file "${fileName}" loaded`, 'success');
                    };
                    reader.readAsText(file);
                } else if (['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg', 'bmp', 'ico'].includes(fileExt)) {
                    droppedContent = URL.createObjectURL(file);
                    showNotification(`üåü Image "${fileName}" ready to launch`, 'success');
                } else {
                    showNotification(`‚ö†Ô∏è Unsupported file type: .${fileExt}`, 'error');
                }
            } else if (currentMode === 'stego') {
                if (fileExt === 'png') {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            carrierImage = img;
                            previewImg.src = e.target.result;
                            imagePreview.classList.remove('hidden');
                            updateStegoStatus(`Carrier loaded: ${fileName} (${img.width}√ó${img.height}px)`);
                            showNotification(`üîÆ Carrier image loaded: ${img.width}√ó${img.height}px`, 'success');
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                } else if (fileExt === 'html') {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        secretMessage.value = e.target.result;
                        showNotification('üìù HTML code loaded into message field', 'success');
                    };
                    reader.readAsText(file);
                } else {
                    showNotification('‚ö†Ô∏è Steganography requires PNG images', 'error');
                }
            }
        }

        function switchToMode(mode) {
            currentMode = mode;
            
            // Update navigation
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(mode + 'Tab').classList.add('active');
            
            // Update content
            document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
            
            setTimeout(() => {
                document.getElementById(mode + 'Content').classList.add('active');
            }, 50);
            
            // Update file input accept and hint
            if (mode === 'stego') {
                fileInput.setAttribute('accept', '.png,.html');
                dropZoneHint.textContent = 'or click to explore ‚Ä¢ .png, .html';
            } else {
                fileInput.setAttribute('accept', '.html,.md,.markdown,.jpg,.jpeg,.png,.gif,.webp,.svg,.bmp,.ico');
                dropZoneHint.textContent = 'or click to explore ‚Ä¢ .html, .md, images';
            }
        }

        // Markdown parser (from Proton)
        function parseMarkdown(md) {
            let html = md.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">");
            html = html.replace(/^### (.*)$/gm, "<h3>$1</h3>");
            html = html.replace(/^## (.*)$/gm, "<h2>$1</h2>");
            html = html.replace(/^# (.*)$/gm, "<h1>$1</h1>");
            html = html.replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>");
            html = html.replace(/\*(.*?)\*/g, "<em>$1</em>");
            html = html.replace(/`([^`]+)`/g, "<code>$1</code>");
            html = html.replace(/^\s*-\s+(.*)$/gm, "<li>$1</li>");
            if (/<li>/.test(html)) html = "<ul>" + html + "</ul>";
            html = html.replace(/^(?!<h|<ul|<li|<p|<code)(.+)$/gm, "<p>$1</p>");
            return html;
        }

        function openNewWindow(url) {
            return pageType.value === 'window'
                ? window.open(url, 'cosmicWindow', 'width=900,height=700,resizable=yes')
                : window.open(url, '_blank');
        }

        function openInAboutBlank(content, faviconURL) {
            const win = openNewWindow('about:blank');
            if (!win) {
                showNotification('üöÄ Please allow pop-ups for launch', 'error');
                return;
            }
            win.document.open();
            win.document.write(content);
            win.document.close();
            if (faviconURL) {
                setTimeout(() => {
                    const link = win.document.createElement('link');
                    link.rel = 'icon';
                    link.href = faviconURL;
                    win.document.head.appendChild(link);
                }, 50);
            }
        }

        function openInBlob(content) {
            const blob = new Blob([content], { type: 'text/html' });
            const win = openNewWindow(URL.createObjectURL(blob));
            if (!win) {
                showNotification('üöÄ Please allow pop-ups for launch', 'error');
            }
        }

        function downloadFile(content, title) {
            const blob = new Blob([content], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = title.replace(/\s+/g, '_') + '.html';
            a.click();
            URL.revokeObjectURL(a.href);
            showNotification('üì• File downloaded!', 'success');
        }

        function launchContent() {
            let content = htmlCode.value.trim();
            const title = pageName.value.trim() || 'Cosmic Project';
            
            // Check if we have an image to launch
            if (droppedContent) {
                const newWindow = openNewWindow('about:blank');
                if (!newWindow) {
                    showNotification('üöÄ Please allow pop-ups for launch', 'error');
                    return;
                }
                const htmlContent = `<!DOCTYPE html>
<html>
<head>
    <title>${title}</title>
    <style>
        body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(135deg, #000000, #0f0520); }
        img { max-width: 95vw; max-height: 95vh; border-radius: 10px; box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3); }
    </style>
</head>
<body>
    <img src="${droppedContent}" alt="Image">
</body>
</html>`;
                newWindow.document.write(htmlContent);
                newWindow.document.close();
                droppedContent = null;
                showNotification('üöÄ Image launched into the cosmos', 'success');
                return;
            }

            if (!content) {
                showNotification('‚ö° Please provide content to launch', 'error');
                return;
            }

            // Get favicon
            let faviconURL = '';
            if (faviconSelect.value === 'custom') {
                faviconURL = customFaviconBox.value.trim();
            } else if (faviconSelect.value !== '') {
                faviconURL = faviconSelect.value;
            }
            const faviconTag = faviconURL ? `<link rel="icon" href="${faviconURL}">` : '';

            // Process content based on data type
            let processedContent = content;
            if (dataType.value === 'dataencode') {
                const prefix = 'data:text/html,';
                if (processedContent.startsWith(prefix)) {
                    processedContent = decodeURIComponent(processedContent.slice(prefix.length));
                }
            } else if (dataType.value === 'markdown') {
                processedContent = `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>${title}</title>
    ${faviconTag}
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 800px; margin: 0 auto; padding: 40px 20px; line-height: 1.6; background: linear-gradient(135deg, #1a1a2e, #16213e); color: #e0e0e0; min-height: 100vh; }
        h1, h2, h3 { color: #a78bfa; border-bottom: 1px solid rgba(167, 139, 250, 0.3); padding-bottom: 0.5em; }
        code { background: rgba(139, 92, 246, 0.2); padding: 2px 6px; border-radius: 4px; font-family: 'Monaco', 'Consolas', monospace; }
        ul { padding-left: 20px; }
        li { margin: 8px 0; }
        strong { color: #c4b5fd; }
        em { color: #ddd6fe; }
    </style>
</head>
<body>
${parseMarkdown(processedContent)}
</body>
</html>`;
            } else {
                // HTML - just add favicon if needed
                if (faviconTag && !processedContent.includes('<link rel="icon"')) {
                    if (processedContent.includes('</head>')) {
                        processedContent = processedContent.replace('</head>', faviconTag + '</head>');
                    } else if (processedContent.includes('<head>')) {
                        processedContent = processedContent.replace('<head>', '<head>' + faviconTag);
                    } else {
                        processedContent = faviconTag + '\n' + processedContent;
                    }
                }
            }

            // Launch based on source type
            if (sourceType.value === 'filelink') {
                downloadFile(processedContent, title);
            } else if (sourceType.value === 'blank') {
                openInAboutBlank(processedContent, faviconURL);
                showNotification('üöÄ Launched into the cosmos', 'success');
            } else if (sourceType.value === 'blob') {
                openInBlob(processedContent);
                showNotification('üöÄ Launched via Blob URL', 'success');
            }
        }

        function generateCarrierImage() {
            const canvas = document.createElement('canvas');
            canvas.width = 800;
            canvas.height = 600;
            const ctx = canvas.getContext('2d');
            
            // Create cosmic gradient
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            const hue1 = Math.floor(Math.random() * 360);
            const hue2 = (hue1 + 60) % 360;
            gradient.addColorStop(0, `hsl(${hue1}, 70%, 50%)`);
            gradient.addColorStop(0.5, `hsl(${hue2}, 60%, 40%)`);
            gradient.addColorStop(1, `hsl(${hue1}, 80%, 30%)`);
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Add cosmic noise/stars
            for (let i = 0; i < 200; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const size = Math.random() * 2;
                ctx.fillStyle = `rgba(255, 255, 255, ${Math.random() * 0.8})`;
                ctx.fillRect(x, y, size, size);
            }
            
            canvas.toBlob((blob) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        carrierImage = img;
                        previewImg.src = e.target.result;
                        imagePreview.classList.remove('hidden');
                        updateStegoStatus(`Generated carrier: ${img.width}√ó${img.height}px`);
                        showNotification('üé® Cosmic carrier image generated!', 'success');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(blob);
            }, 'image/png');
        }

        function encodeMessage() {
            if (!carrierImage) {
                showNotification('üì∑ Please load or generate a PNG carrier image first', 'error');
                return;
            }
            
            const message = secretMessage.value.trim();
            if (!message) {
                showNotification('‚úçÔ∏è Please enter HTML code to hide', 'error');
                return;
            }
            
            const ctx = stegoCanvas.getContext('2d');
            stegoCanvas.width = carrierImage.width;
            stegoCanvas.height = carrierImage.height;
            ctx.drawImage(carrierImage, 0, 0);
            
            const imageData = ctx.getImageData(0, 0, carrierImage.width, carrierImage.height);
            const pixels = imageData.data;
            
            const messageBytes = new TextEncoder().encode(message);
            const messageLength = messageBytes.length;
            
            const requiredPixels = (messageLength + 4) * 8;
            const availablePixels = pixels.length / 4;
            
            if (availablePixels < requiredPixels) {
                showNotification(`üìê Image too small! Need ${requiredPixels} pixels, have ${availablePixels}`, 'error');
                return;
            }
            
            const lengthBytes = new Uint8Array(4);
            new DataView(lengthBytes.buffer).setUint32(0, messageLength, true);
            
            let dataIndex = 0;
            
            for (let i = 0; i < 4; i++) {
                for (let bit = 0; bit < 8; bit++) {
                    const pixelIndex = dataIndex * 4;
                    pixels[pixelIndex] = (pixels[pixelIndex] & 0xFE) | ((lengthBytes[i] >> bit) & 1);
                    dataIndex++;
                }
            }
            
            for (let i = 0; i < messageLength; i++) {
                for (let bit = 0; bit < 8; bit++) {
                    const pixelIndex = dataIndex * 4;
                    pixels[pixelIndex] = (pixels[pixelIndex] & 0xFE) | ((messageBytes[i] >> bit) & 1);
                    dataIndex++;
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
            
            stegoCanvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'cosmic_encoded.png';
                a.click();
                URL.revokeObjectURL(url);
                showNotification(`üîê HTML encoded! ${messageLength} bytes hidden in ${dataIndex} pixels`, 'success');
            }, 'image/png');
        }

        function decodeMessage() {
            if (!carrierImage) {
                showNotification('üì∑ Please load an encoded PNG image', 'error');
                return;
            }
            
            const ctx = stegoCanvas.getContext('2d');
            stegoCanvas.width = carrierImage.width;
            stegoCanvas.height = carrierImage.height;
            ctx.drawImage(carrierImage, 0, 0);
            
            const imageData = ctx.getImageData(0, 0, carrierImage.width, carrierImage.height);
            const pixels = imageData.data;
            
            let dataIndex = 0;
            
            const lengthBytes = new Uint8Array(4);
            for (let i = 0; i < 4; i++) {
                let byte = 0;
                for (let bit = 0; bit < 8; bit++) {
                    const pixelIndex = dataIndex * 4;
                    byte |= (pixels[pixelIndex] & 1) << bit;
                    dataIndex++;
                }
                lengthBytes[i] = byte;
            }
            
            const messageLength = new DataView(lengthBytes.buffer).getUint32(0, true);
            
            if (messageLength === 0 || messageLength > pixels.length / 4 || messageLength > 10000000) {
                showNotification('üîç No hidden message found or invalid data', 'error');
                return;
            }
            
            const messageBytes = new Uint8Array(messageLength);
            for (let i = 0; i < messageLength; i++) {
                let byte = 0;
                for (let bit = 0; bit < 8; bit++) {
                    const pixelIndex = dataIndex * 4;
                    byte |= (pixels[pixelIndex] & 1) << bit;
                    dataIndex++;
                }
                messageBytes[i] = byte;
            }
            
            try {
                const decodedMessage = new TextDecoder().decode(messageBytes);
                secretMessage.value = decodedMessage;
                
                const newWindow = window.open('', '_blank');
                if (newWindow) {
                    newWindow.document.write(decodedMessage);
                    newWindow.document.close();
                    showNotification(`üîì Decoded ${messageLength} bytes and launched HTML!`, 'success');
                } else {
                    showNotification(`üîì Decoded ${messageLength} bytes! (Enable popups to launch)`, 'success');
                }
            } catch (e) {
                showNotification('‚ùå Failed to decode: Invalid UTF-8 data', 'error');
            }
        }

        function updateStegoStatus(message) {
            stegoStatus.innerHTML = `<div class="status-dot mr-2"></div><span>${message || 'Ready for quantum encoding'}</span>`;
        }

        function showNotification(message, type = 'info') {
            const colors = {
                success: 'border-purple-500/30 text-purple-300',
                error: 'border-red-500/30 text-red-300',
                info: 'border-purple-500/30 text-purple-300'
            };
            
            notificationArea.className = `notification rounded-xl p-4 mb-6 ${colors[type]}`;
            notificationArea.innerHTML = `
                <div class="flex items-center">
                    <span class="text-sm md:text-base">${message}</span>
                </div>
            `;
            notificationArea.classList.remove('hidden');
            
            setTimeout(() => {
                notificationArea.classList.add('hidden');
            }, 5000);
        }

        function clearCode() {
            htmlCode.value = '';
            showNotification('‚ú® Code cleared', 'info');
        }

        function clearAll() {
            htmlCode.value = '';
            pageName.value = '';
            faviconSelect.value = '';
            customFaviconBox.value = '';
            customFaviconBox.classList.add('hidden');
            pageType.value = 'tab';
            sourceType.value = 'blank';
            dataType.value = 'html';
            pageType.disabled = false;
            fileHint.classList.add('hidden');
            actionBtnText.textContent = 'Launch into Space';
            droppedContent = null;
            showNotification('‚ú® Launcher cleared', 'info');
        }

        function clearStego() {
            secretMessage.value = '';
            carrierImage = null;
            imagePreview.classList.add('hidden');
            updateStegoStatus('Ready for quantum encoding');
            showNotification('‚ú® Steganography cleared', 'info');
        }

        function loadSample() {
            htmlCode.value = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Sample</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 500px;
        }
        h1 {
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            font-size: 2.5rem;
        }
        p {
            color: #000;
            line-height: 1.6;
        }
        .time {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            color: white;
            border-radius: 50px;
            font-weight: 600;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ú® Hello, Cosmos!</h1>
        <p>Welcome to the Galactic Gateway sample page. This is a glimpse into the infinite possibilities of the digital universe.</p>
        <div class="time" id="time"></div>
    </div>
    <script>
        function updateTime() {
            document.getElementById("time").textContent = new Date().toLocaleTimeString();
        }
        updateTime();
        setInterval(updateTime, 1000);
    <\/script>
</body>
</html>`;
            dataType.value = 'html';
            showNotification('üåü Sample HTML loaded', 'success');
        }
    </script>
</body>
</html>